<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Quản lý Sinh viên (AJAX - MockAPI)</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f6f8;
    padding: 20px;
}

.container {
    max-width: 900px;
    margin: auto;
    background: #fff;
    padding: 20px;
    border-radius: 8px;
}

h2 {
    margin-top: 40px;
    color: #0056d2;
}

.team-box {
    background: #eaf4ff;
    border-left: 6px solid #0066ff;
    padding: 20px;
    border-radius: 8px;
}

.team-item {
    padding: 10px 0;
    border-bottom: 1px dashed #b6d4ff;
}

.team-item:last-child {
    border-bottom: none;
}

input {
    padding: 6px;
    margin: 4px;
}

button {
    padding: 6px 10px;
    cursor: pointer;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}

th, td {
    border: 1px solid #ccc;
    padding: 8px;
    text-align: center;
}

th {
    background: #0066ff;
    color: white;
}

.btn-edit {
    background: #ffc107;
    border: none;
    padding: 5px 8px;
}

.btn-delete {
    background: #dc3545;
    color: white;
    border: none;
    padding: 5px 8px;
}
</style>
</head>

<body>
<div class="container">

<!-- DANH SÁCH THÀNH VIÊN -->
<div class="team-box">
    <h2>Danh sách thành viên nhóm</h2>

    <div class="team-item">
        <b>1. Họ tên:</b> Lê Kiều Phương<br>
        <b>MSSV:</b> DH52201276 | <b>Lớp:</b> D22_TH13
    </div>

    <div class="team-item">
        <b>2. Họ tên:</b> Huỳnh Dương Huỳnh<br>
        <b>MSSV:</b> DH52200818 | <b>Lớp:</b> D22_TH13
    </div>

    <div class="team-item">
        <b>3. Họ tên:</b> Phạm Minh Quân<br>
        <b>MSSV:</b> DH52201295 | <b>Lớp:</b> D22_TH13
    </div>

    <div class="team-item">
        <b>4. Họ tên:</b> Trần Bội Ngọc<br>
        <b>MSSV:</b> DH52201111 | <b>Lớp:</b> D22_TH13
    </div>

    <div class="team-item">
        <b>5. Họ tên:</b> Phan Thị Bích Chi<br>
        <b>MSSV:</b> DH52200407 | <b>Lớp:</b> D22_TH13
    </div>
</div>

<h2>Quản lý Sinh viên (MockAPI)</h2>

<input type="hidden" id="id">
<input type="text" id="mssv" placeholder="MSSV">
<input type="text" id="hoten" placeholder="Họ tên">
<input type="text" id="lop" placeholder="Lớp">
<input type="number" id="diem" placeholder="Điểm">
<button onclick="saveStudent()">Thêm / Cập nhật</button>

<table>
<thead>
<tr>
    <th>ID</th>
    <th>MSSV</th>
    <th>Họ tên</th>
    <th>Lớp</th>
    <th>Điểm</th>
    <th>Hành động</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>

</div>

<script>
const API_URL = "https://69829d539c3efeb892a2c899.mockapi.io/sinhvien";

// LOAD DATA
function loadData() {
    fetch(API_URL)
    .then(res => res.json())
    .then(data => {
        let html = "";
        data.forEach(sv => {
            html += `
            <tr>
                <td>${sv.id}</td>
                <td>${sv.mssv}</td>
                <td>${sv.hoten}</td>
                <td>${sv.lop}</td>
                <td>${sv.diem}</td>
                <td>
                    <button class="btn-edit"
                        onclick="editStudent(
                            '${sv.id}',
                            '${sv.mssv}',
                            '${sv.hoten}',
                            '${sv.lop}',
                            '${sv.diem}'
                        )">
                        Sửa
                    </button>
                    <button class="btn-delete"
                        onclick="deleteStudent('${sv.id}')">
                        Xóa
                    </button>
                </td>
            </tr>`;
        });
        document.getElementById("list").innerHTML = html;
    });
}

// ADD / UPDATE
function saveStudent() {
    const id = document.getElementById("id").value;
    const mssv = document.getElementById("mssv").value;
    const hoten = document.getElementById("hoten").value;
    const lop = document.getElementById("lop").value;
    const diem = document.getElementById("diem").value;

    if (!mssv || !hoten || !lop || diem === "") {
        alert("Nhập đầy đủ thông tin!");
        return;
    }

    const data = { mssv, hoten, lop, diem };

    if (id) {
        fetch(API_URL + "/" + id, {
            method: "PUT",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        }).then(resetForm);
    } else {
        fetch(API_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        }).then(resetForm);
    }
}

// EDIT
function editStudent(id, mssv, hoten, lop, diem) {
    document.getElementById("id").value = id;
    document.getElementById("mssv").value = mssv;
    document.getElementById("hoten").value = hoten;
    document.getElementById("lop").value = lop;
    document.getElementById("diem").value = diem;
}

// DELETE
function deleteStudent(id) {
    if (confirm("Xóa sinh viên này?")) {
        fetch(API_URL + "/" + id, { method: "DELETE" })
        .then(loadData);
    }
}

// RESET
function resetForm() {
    document.getElementById("id").value = "";
    document.getElementById("mssv").value = "";
    document.getElementById("hoten").value = "";
    document.getElementById("lop").value = "";
    document.getElementById("diem").value = "";
    loadData();
}

loadData();
</script>

</body>
</html>